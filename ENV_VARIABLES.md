# üîë Environment Variables Quick Reference

## Backend Environment Variables

### ‚úÖ REQUIRED Variables

```bash
# Database Configuration
DATABASE_URL=<postgres-connection-string>  # Auto-filled by Render
DB_SCHEMA=public

# Security & JWT
SECRET_KEY=<auto-generated-or-custom>      # Auto-generated by Render
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# LLM Provider Configuration
LLM_PROVIDER=gemini                        # Options: gemini, groq, openrouter, ollama
GEMINI_API_KEY=<your-key>                  # üî¥ MUST SET MANUALLY
GEMINI_MODEL=gemini-1.5-flash

# Email Configuration
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_EMAIL=<your-email@gmail.com>          # üî¥ MUST SET MANUALLY
SMTP_PASSWORD=<gmail-app-password>         # üî¥ MUST SET MANUALLY

# OTP Configuration
OTP_SECRET=<auto-generated-or-custom>      # Auto-generated by Render

# Voice Configuration (Basic)
WHISPER_MODEL=tiny
WHISPER_LANGUAGE=en
PIPER_MODEL=en_US-amy-medium
PIPER_VOICE=en_US-amy-medium
```

### ‚öôÔ∏è OPTIONAL Variables

```bash
# Groq Configuration (Alternative LLM)
GROQ_API_KEY=<your-groq-key>
GROQ_MODEL=llama-3.3-70b-versatile

# OpenRouter Configuration (Alternative LLM)
OPENROUTER_API_KEY=<your-openrouter-key>
OPENROUTER_MODEL=meta-llama/llama-3.1-8b-instruct
OPENROUTER_SITE_URL=https://your-backend-url.onrender.com
OPENROUTER_APP_NAME=AI Loan System

# Deepgram Configuration (Real-time Voice)
DEEPGRAM_API_KEY=<your-deepgram-key>

# Ollama Configuration (Local only - not for Render)
OLLAMA_API_URL=http://localhost:11434/api
OLLAMA_MODEL=llama3.2

# Vosk Configuration (Local only)
VOSK_MODEL_PATH=./models/vosk-model-small-en-us-0.15

# Supabase Specific (if using Supabase instead of Render DB)
SUPABASE_HOSTADDR=<ip-address>
```

---

## Frontend Environment Variables

### ‚úÖ REQUIRED Variables

```bash
REACT_APP_API_URL=https://ai-loan-backend.onrender.com/api
```

**Note**: Update this URL if using custom domain

---

## üîó Where to Get API Keys

### 1. Gemini API Key (Required)
- **URL**: https://makersuite.google.com/app/apikey
- **Cost**: Free tier available
- **Purpose**: Primary AI/LLM provider for chat features

### 2. Gmail App Password (Required)
- **How to Get**:
  1. Go to Google Account Settings
  2. Security ‚Üí Enable 2-Step Verification
  3. Security ‚Üí App Passwords
  4. Create password for "Mail"
- **Cost**: Free
- **Purpose**: Send emails for OTP and notifications

### 3. Groq API Key (Optional)
- **URL**: https://console.groq.com
- **Cost**: Free tier available
- **Purpose**: Fast LLM inference (alternative to Gemini)

### 4. OpenRouter API Key (Optional)
- **URL**: https://openrouter.ai/keys
- **Cost**: Pay-per-use, various models
- **Purpose**: Access to multiple LLM models

### 5. Deepgram API Key (Optional)
- **URL**: https://console.deepgram.com
- **Cost**: Free tier with credits
- **Purpose**: Real-time speech-to-text for voice features

---

## üéØ Render Dashboard Setup

### Setting Environment Variables in Render:

1. Go to your service dashboard (backend or frontend)
2. Click "Environment" tab in left sidebar
3. Click "Add Environment Variable"
4. Enter Key and Value
5. Click "Save Changes"
6. Service will automatically redeploy

### Using render.yaml (Automated):

Environment variables in `render.yaml` are set automatically when using Blueprint deployment:

- `generateValue: true` ‚Üí Render auto-generates a secure random value
- `sync: false` ‚Üí Must be set manually in dashboard (for secrets)
- `value: xyz` ‚Üí Static value set automatically
- `fromDatabase` ‚Üí Auto-filled from database connection

---

## üîê Security Best Practices

1. **Never commit `.env` files** to Git
2. **Use strong SECRET_KEY**: At least 32 characters, random
3. **Gmail App Password**: Use dedicated app password, not account password
4. **API Keys**: Keep private, rotate periodically
5. **Database URL**: Never expose publicly

---

## üß™ Local Development

Create `backend/.env` file for local testing:

```bash
SECRET_KEY=dev-secret-key-change-in-production
DATABASE_URL=sqlite:///./ai_loan_system.db
DB_SCHEMA=public
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

LLM_PROVIDER=gemini
GEMINI_API_KEY=your-actual-key-here
GEMINI_MODEL=gemini-1.5-flash

SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_EMAIL=your-email@gmail.com
SMTP_PASSWORD=your-app-password

OTP_SECRET=JBSWY3DPEHPK3PXP

WHISPER_MODEL=tiny
WHISPER_LANGUAGE=en
PIPER_MODEL=en_US-amy-medium
PIPER_VOICE=en_US-amy-medium
```

Create `frontend/.env` file:

```bash
REACT_APP_API_URL=http://localhost:8000/api
```

---

## ‚ö†Ô∏è Common Mistakes

### Backend:

‚ùå **Wrong**: Using regular Gmail password for `SMTP_PASSWORD`
‚úÖ **Right**: Use Gmail App Password (16 characters, no spaces)

‚ùå **Wrong**: Missing `GEMINI_API_KEY`
‚úÖ **Right**: Set valid API key from Google AI Studio

‚ùå **Wrong**: `DATABASE_URL` not set
‚úÖ **Right**: Auto-filled by Render when linking database

### Frontend:

‚ùå **Wrong**: `REACT_APP_API_URL=localhost:8000`
‚úÖ **Right**: `REACT_APP_API_URL=https://ai-loan-backend.onrender.com/api`

‚ùå **Wrong**: Backend URL without `/api`
‚úÖ **Right**: Always include `/api` at the end

---

## üìã Pre-Deployment Checklist

- [ ] `GEMINI_API_KEY` obtained from Google AI Studio
- [ ] Gmail App Password generated (not regular password)
- [ ] `SMTP_EMAIL` is valid Gmail address
- [ ] `SECRET_KEY` is strong and unique
- [ ] Frontend `REACT_APP_API_URL` points to correct backend URL
- [ ] All `sync: false` variables manually added in Render
- [ ] Database created and connected
- [ ] `render.yaml` updated with correct service names

---

## üîÑ Updating Variables After Deployment

1. Go to service in Render dashboard
2. Click "Environment" tab
3. Click pencil icon on variable to edit
4. Update value
5. Click "Save Changes"
6. Service automatically redeploys with new values

---

## üí° Tips

- **Start with Required Variables**: Deploy with minimum required vars first
- **Test Incrementally**: Add optional features one at a time
- **Check Logs**: Always verify deployment logs after adding new variables
- **Use Free Tiers**: All required APIs have free tiers for testing
- **Secure Secrets**: Use Render's secret management, never expose in logs

---

Need help? See full deployment guide in `DEPLOYMENT_GUIDE.md`
